<!DOCTYPE html>
<html lang="en">

   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">

   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <title>MAJARA</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">

   <link rel="icon" href="images/fevicon.png" type="image/png" />
 
   <link href="../static/css/bootstrap.css" rel="stylesheet">
  
   <link href="../static/css/font-awesome.min.css" rel="stylesheet">

   <link href="../static/css/animate.css" rel="stylesheet">
 
   <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
   <link href="../static/css/style.css" rel="stylesheet">
  
   <link href="../static/css/responsive.css" rel="stylesheet">
   
   <link href="../static/css/colors.css" rel="stylesheet">
  
   <link href="../static/css/ekko-lightbox.css" rel="stylesheet">
   <style>
      /* Style for the modal */
      .modal {
         display: none;  /* Hidden by default */
         position: fixed;
         z-index: 1; /* Sit on top */
         left: 0;
         top: 80px; /* Adjusted to position below the ring */
         width: 100%;
         height: auto; /* Adjusted the height to fit the content */
         background-color: rgba(0, 0, 0, 0.5); /* Black background with opacity */
         overflow: auto; /* Enable scroll if needed */
         padding-top: 60px;
      }

      /* Modal Content */
      .modal-content {
          background-color: #f72222;
          margin: 5% auto;
          padding: 20px;
          border: 1px solid #000000;
          width: 300px;
      }
      
      .separate {
      background-color:  #6c120c;
      border: 1px solid #ddd;
      margin-bottom: 15px; /* Increased space between notifications */
      padding: 15px; /* Increased padding for more space inside each notification */
      border-radius: 8px; /* Rounded corners */
      transition: background-color 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Adds a soft shadow to each notification */
}

      /* Close button */
      .close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
      }

      .close:hover,
      .close:focus {
          color: black;
          text-decoration: none;
          cursor: pointer;
      }

      /* Notification icon style */
      #notification-icon {
          font-size: 24px;
          cursor: pointer;
          position: fixed;
          top: 20px;
          right: 20px;
          padding: 10px;
          border-radius: 50%;
      }
  </style>
 
   </head>
<!--
   PAGE : Home Page

   PURPOSE : Attract customers by displaying some popular items from the database and
   provide the login and sign up functionalities for users

   COMPONENTS : Navbar(to navigate through other pages), Login/Signup,
    Popular items section, footer section

   -->
   <body id="home_page" class="home_page">
    
      <div id="preloader">
         <img class="preloader" src="..\static\images\majara_logo.png" alt="#">
      </div>
      
<!--the Header contains the 
   1. logo which is a link that redirects to the index page
   2. the account icon that is a link that redirects the user to login/sign-up page
   -->
   <header class="header">
      <div class="header_top_section">
         <div class="container">
            <div class="row">
               <div class="col-lg-3">
                  <div class="logo-wrapper">
                     <div class="logo">
                        <a href="/"><img src="..\static\images\majara_logo.png" alt="#" /></a>
                     </div>
                     <div class="brand-name">
                        Majara
                     </div>
                  </div>
               </div>
               <div class="col-lg-9 d-flex justify-content-end align-items-center">
                  <!-- Notification Icon -->
                  <div class="notification-wrapper">
                     <span id="notification-icon" class="notification-icon">
                         ðŸ”” 
                         {% if session.get('user_id') %}
                             <span class="notification-count">{{ session['notification_count'] }}</span>
                         {% endif %}
                     </span>
                 </div>
                 
   
                  <!-- Account Icon -->
                  <div class="logo-wrapper">
                     <div class="logo">
                        {% if session.get('user_id') %}
                           <!-- If user is logged in, show logout option -->
                        
                           <div class="user-name">
                              <a href="/logout">Logout</a>
                           </div>
                        {% else %}
                           <!-- If user is not logged in, show login option -->
                           <a href="/login">
                              <img src="../static/images/account-icon.png" alt="Login" class="login-icon">
                           </a>
                         
                        {% endif %}
                     </div>
                     {% if session.get('user_id') %}
                        <div class="user-name">
                           Welcome, {{ session.get('user_name') }}!
                        </div>
                     {% endif %}
                  </div>
               </div>
            </div>
         </div>
      </div>
  
         
         <!--The Navbar through which the user can navigate through all pages(HOME/JEWELLERY/SHOP/CONTACT/ABOUT)-->
 
        <div class="header_bottom_section">

         <div class="container">
            
           <div class="row">
               <div class="col-md-12">
                  <div class="full ">
                     <div class="main_menu">
                        <nav class="navbar navbar-inverse navbar-toggleable-md">
                           <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#cloapediamenu" aria-controls="cloapediamenu" aria-expanded="false" aria-label="Toggle navigation">
                           <span class="float-left">Menu</span>
                           <span class="float-right"><i class="fa fa-bars"></i> <i class="fa fa-close"></i></span>
                           </button>
                           <div class="collapse navbar-collapse justify-content-md-center" id="cloapediamenu">
                              <ul class="navbar-nav">
                                 <li class="nav-item active">
                                    <a class="nav-link" href='/'>Home</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-grey-hover" href="/shop">Shop</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-grey-hover" href="/contact">Review</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-aqua-hover" href="/about">About</a>
                                 </li>
                                 
                              </ul>
                           </div>
                        </nav>
                     </div>
                     <button id="darkModeToggle" class="btn btn-dark">
                        <i class="fa fa-moon-o"></i> Theme
                     </button>
                  </div>
               </div>
            </div>
         </div>
        
      </header>
   
   <!--This section is responsible for describing the website objective and attract users-->
      <section class="slider_section">
         <div class="container-fluid">
            <div class="row">
               <div id="main_slider" class="carousel slide carousel-fade" data-ride="carousel" data-interval="5000">
                  <div class="carousel-inner">
                     <div class="carousel-item slider_inner slider1 active">
                        <div class="container">
                           <div class="row">
                              <div class="slider_coint_inner">
                                 <h4 class="font_themecolor">Find your GemStone here</h4>
                                 <p >Your beauty can not be devined only by external appearance. Inner beauty plays a big part for it. <br>
                                    But, there is no way you do not want to enhance your external beauty. So, here we are offering you the best thing you could ever get.</p>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="carousel-item slider_inner slider2">
                        <div class="container">
                           <div class="row">
                              <div class="slider_coint_inner">
                                 <h3>Best<br><strong>New Collection</strong></h3>
                                 <h4 class="font_themecolor">Loxury Jewellery</h4>
                                 <p>Lorem ipsum dolor sit amet consec tetur adipiscing elit elit at felis<br>
                                    lacinia nec et est aptent taciti sociosqu ad litora torquent per conubia nostra</p>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="slider_bullets">
                        <ol class="carousel-indicators">
                           <li data-target="#main_slider" data-slide-to="0" class="active"><i class="fa fa-chevron-left"></i></li>
                           <li data-target="#main_slider" data-slide-to="1"><i class="fa fa-chevron-right"></i></li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
   

      <!--This section is for displaying the popular items(first results from webscrabbing)
      with exception to handle any errors from loading the database
      -->
      <section class="layout_padding section padding_bottom_0">
         <div class="container">
            <div class="row">
               <div class="col-lg-12">
                  <div class="header-section">
                     <div class="line"></div>
                     <div>POPULAR ITEMS</div>
                     <div class="line"></div>
                 </div>
                  <div class="full">
                     <p class="large"></p>
                  </div>
               </div>
               <div id="product-container" class="product-container">
                  {% for product in products[:8] %}
                  <div class="product">
                      <img src="{{ product[2] }}" alt="{{ product[1] }}" />
                      <p class="product-title">{{ product[1] }}</p>
                      <p class="product-price">Price: {{ product[4] }} (EGP: {{ product[5] }})</p>
                      <a href="{{ product[3] }}" class="product-link">View Product</a>
                      
                      <!-- Add Review button -->
                      <a href="/review" class="product-link">Add Review</a>
                  </div>
                 {% endfor %}
               </div>
            </div>
         </div>
      </section>
    

      <!--Footer section that contains the contact info-->
      <footer class="footer layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-3 col-sm-12 mb-3">
                  <a href="/">
                     <img class="img-responsive" src="../static/images/majara_logo.png" alt="Majara Logo" />
                  </a>
               </div>
               <div class="col-md-6">
                  <h4 class="text-uppercase mb-3">Contact Us</h4>
                  <p class="mb-2"><strong>Address:</strong> 5th settlement, City</p>
                  <p class="mb-2"><strong>Email:</strong> <a href="mailto:support@majara.com" class="text-white">support@majara.com</a></p>
                  <p><strong>Phone:</strong> +123 456 7890</p>
               </div>
            </div>
         </div>
      </footer>

      <div id="notification-modal" class="modal">
         <div class="modal-content">
             <span class="close" id="close-modal">&times;</span>
             <h2>Notifications</h2>
             <ul>
                 {% for notification in notifications %}
                     <li style="font-weight: {{ 'bold' if not notification.read else 'normal' }}" class ="separate">
                         {{ notification.message }}
                     </li>
                 {% endfor %}
             </ul>
         </div>
     </div>
      <script>
        // Get modal and notification icon elements
        var modal = document.getElementById("notification-modal");
        var notificationIcon = document.getElementById("notification-icon");
        var closeModal = document.getElementById("close-modal");

        // When the user clicks the notification icon, open the modal
        notificationIcon.onclick = function() {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        closeModal.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
      </script>

      <script>
         document.getElementById('darkModeToggle').addEventListener('click', function () {
            document.body.classList.toggle('dark-mode');
         
            // Save the user's preference in localStorage
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
         });
         
         // Load the user's preference on page load
         window.addEventListener('DOMContentLoaded', function () {
            if (localStorage.getItem('darkMode') === 'true') {
               document.body.classList.add('dark-mode');
            }
         });
         
               </script>


      <script src="../static/js/jquery.min.js"></script>
      <script src="../static/js/tether.min.js"></script>
      <script src="../static/js/bootstrap.min.js"></script>
      <script src="../static/js/parallax.js"></script>
      <script src="../static/js/animate.js"></script>
      <script src="../static/js/ekko-lightbox.js"></script>
      <script src="../static/js/custom.js"></script>
      <script src="../static/js/script.js"></script>
   </body>
</html>
