<!DOCTYPE html>
<html lang="en">

   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">

   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <title>MAJARA</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">

   <link rel="icon" href="images/fevicon.png" type="image/png" />
 
   <link href="../static/css/bootstrap.css" rel="stylesheet">
  
   <link href="../static/css/font-awesome.min.css" rel="stylesheet">

   <link href="../static/css/animate.css" rel="stylesheet">
 
   <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
   <link href="../static/css/style.css" rel="stylesheet">
  
   <link href="../static/css/responsive.css" rel="stylesheet">
   
   <link href="../static/css/colors.css" rel="stylesheet">
  
   <link href="../static/css/ekko-lightbox.css" rel="stylesheet">
 
   </head>
<!--
   PAGE : Home Page

   PURPOSE : Attract customers by displaying some popular items from the database and
   provide the login and sign up functionalities for users

   COMPONENTS : Navbar(to navigate through other pages), Login/Signup,
    Popular items section, footer section

   -->
   <body id="home_page" class="home_page">
    
      <div id="preloader">
         <img class="preloader" src="..\static\images\majara_logo.png" alt="#">
      </div>
      
<!--the Header contains the 
   1. logo which is a link that redirects to the index page
   2. the account icon that is a link that redirects the user to login/sign-up page
   -->
         <header class="header">
            <div class="header_top_section">
               <div class="container">
                  <div class="row">
                     <div class="col-lg-3">
                        <div class="logo-wrapper">
                           <div class="logo">
                              <a href="/"><img src="..\static\images\majara_logo.png" alt="#" /></a>
                           </div>
                           <div class="brand-name">
                              Majara
                           </div>
                        </div>
                     </div>
                     <div class="col-lg-9 d-flex justify-content-end">
                        <div class="logo-wrapper">
                            <div class="logo">
                                {% if session.get('user_id') %}
                                    <!-- If user is logged in, show logout option -->
                                    <a href="/logout">
                                        <img src="../static/images/account-icon.png" alt="Logout" class="login-icon">
                                    </a>
                                {% else %}
                                    <!-- If user is not logged in, show login option -->
                                    <a href="/login">
                                        <img src="../static/images/account-icon.png" alt="Login" class="login-icon">
                                    </a>
                                {% endif %}
                            </div>
                    
                            {% if session.get('user_id') %}
                                <div class="user-name">
                                    Welcome, {{ session.get('user_name') }}!
                                </div>
                            {% endif %}
                           </div>
                        </div>
                  </div>
               </div>
            </div>
         
         <!--The Navbar through which the user can navigate through all pages(HOME/JEWELLERY/SHOP/CONTACT/ABOUT)-->
 
        <div class="header_bottom_section">

         <div class="container">
            
           <div class="row">
               <div class="col-md-12">
                  <div class="full ">
                     <div class="main_menu">
                        <nav class="navbar navbar-inverse navbar-toggleable-md">
                           <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#cloapediamenu" aria-controls="cloapediamenu" aria-expanded="false" aria-label="Toggle navigation">
                           <span class="float-left">Menu</span>
                           <span class="float-right"><i class="fa fa-bars"></i> <i class="fa fa-close"></i></span>
                           </button>
                           <div class="collapse navbar-collapse justify-content-md-center" id="cloapediamenu">
                              <ul class="navbar-nav">
                                 <li class="nav-item active">
                                    <a class="nav-link" href='/'>Home</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-grey-hover" href="/shop">Shop</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-grey-hover" href="/contact">Contact</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link color-aqua-hover" href="/about">About</a>
                                 </li>
                              </ul>
                           </div>
                        </nav>
                     </div>
                     <div class="search_bar">
                        <form id="navbarSearchForm" onsubmit="handleNavbarSearch(event)">
                           <input type="text" id="navbarSearchInput" class="search_field" placeholder="Search..." required />
                           <button class="search_button" type="submit"><i class="fa fa-search"></i></button>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </header>
   
   <!--This section is responsible for describing the website objective and attract users-->
      <section class="slider_section">
         <div class="container-fluid">
            <div class="row">
               <div id="main_slider" class="carousel slide carousel-fade" data-ride="carousel" data-interval="5000">
                  <div class="carousel-inner">
                     <div class="carousel-item slider_inner slider1 active">
                        <div class="container">
                           <div class="row">
                              <div class="slider_coint_inner">
                                 <h4 class="font_themecolor">Find your GemStone here</h4>
                                 <p >Your beauty can not be devined only by external appearance. Inner beauty plays a big part for it. <br>
                                    But, there is no way you do not want to enhance your external beauty. So, here we are offering you the best thing you could ever get.</p>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="carousel-item slider_inner slider2">
                        <div class="container">
                           <div class="row">
                              <div class="slider_coint_inner">
                                 <h3>Best<br><strong>New Collection</strong></h3>
                                 <h4 class="font_themecolor">Loxury Jewellery</h4>
                                 <p>Lorem ipsum dolor sit amet consec tetur adipiscing elit elit at felis<br>
                                    lacinia nec et est aptent taciti sociosqu ad litora torquent per conubia nostra</p>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="slider_bullets">
                        <ol class="carousel-indicators">
                           <li data-target="#main_slider" data-slide-to="0" class="active"><i class="fa fa-chevron-left"></i></li>
                           <li data-target="#main_slider" data-slide-to="1"><i class="fa fa-chevron-right"></i></li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
   

      <!--This section is for displaying the popular items(first results from webscrabbing)
      with exception to handle any errors from loading the database
      -->
      <section class="layout_padding section padding_bottom_0">
         <div class="container">
            <div class="row">
               <div class="col-lg-12">
                  <div class="header-section">
                     <div class="line"></div>
                     <div>POPULAR ITEMS</div>
                     <div class="line"></div>
                 </div>
                  <div class="full">
                     <p class="large"></p>
                  </div>
               </div>
               <div id="product-container" class="product-container"></div>
                  <script>
                     // fetch function loops through the products in the database 
                     // create a div containing info for each product  
                     // append the div created to the parent div with id="product-container"
                     fetch('/api/products')
                           .then(response => response.json())
                           .then(products => {
                              // refer to the parent div
                              const container = document.getElementById('product-container');

                              const limitedproducts = products.slice(0, 4);
                              limitedproducts.forEach(product => {
                                 // creation of child div
                                 const productDiv = document.createElement('div');
                                 // set attribute class to 'product'
                                 productDiv.classList.add('product');
                                 
                                 // create tag img
                                 const image = document.createElement('img');
                                 // set attribute src to the image usl
                                 image.src = product["Image URL"];
                                 // set attribute alt to title
                                 image.alt = product["Title"];
                                 productDiv.appendChild(image);
                                 
                                 // create p (paragraph) tag
                                 const title = document.createElement('p');
                                 // set attribute class to 'product-title'
                                 title.classList.add('product-title');
                                 // set attribute text to 'title'
                                 title.textContent = product["Title"];
                                 productDiv.appendChild(title);
                                 
                                 // create p (paragraph) tag
                                 const price = document.createElement('p');
                                 // set attribute class to 'product-price'
                                 price.classList.add('product-price');
                                 // set attribute text to the price of the item
                                 price.textContent = `Price: ${product["Base Price"]} (EGP: ${product["Price (EGP)"]})`;
                                 productDiv.appendChild(price);
                                 
                                 // create a (link) tag
                                 const link = document.createElement('a');
                                 // set the link to the product-link
                                 link.href = product["Product Link"];
                                 // set attribute class to 'product-link'
                                 link.classList.add('product-link');
                                 // set attribute text to 'View Product'
                                 link.textContent = "View Product";
                                 productDiv.appendChild(link);
                                 

                                  // create a (link) tag
                                 const review = document.createElement('a')

                                 // set the link attribute to the review page 
                                 review.href = "/review";
                                 // set attribute class to 'product-link'
                                 review.classList.add('product-link');
                                 // set attribute text to 'Add Review'
                                 review.textContent = "Add Review";
                                 productDiv.appendChild(review);
                                 

                                 // finally append the child div to the parent div
                                 container.appendChild(productDiv);
                              });
                           })
                           .catch(error => {
                              console.error('Error loading the products:', error);
                           });
                  </script>
            </div>
         </div>
      </section>
    

      <!--Footer section that contains the contact info-->
      <footer class="footer layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-3 col-sm-12 mb-3">
                  <a href="/">
                     <img class="img-responsive" src="../static/images/majara_logo.png" alt="Majara Logo" />
                  </a>
               </div>
               <div class="col-md-6">
                  <h4 class="text-uppercase mb-3">Contact Us</h4>
                  <p class="mb-2"><strong>Address:</strong> 5th settlement, City</p>
                  <p class="mb-2"><strong>Email:</strong> <a href="mailto:support@majara.com" class="text-white">support@majara.com</a></p>
                  <p><strong>Phone:</strong> +123 456 7890</p>
               </div>
            </div>
         </div>
      </footer>
   
      <script src="../static/js/jquery.min.js"></script>
      <script src="../static/js/tether.min.js"></script>
      <script src="../static/js/bootstrap.min.js"></script>
      <script src="../static/js/parallax.js"></script>
      <script src="../static/js/animate.js"></script>
      <script src="../static/js/ekko-lightbox.js"></script>
      <script src="../static/js/custom.js"></script>
   </body>
</html>
